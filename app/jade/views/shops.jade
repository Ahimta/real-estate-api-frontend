include mixins/panelfooter
include mixins/mymodalform
include mixins/mypending
include mixins/shopname
include mixins/shopform
include mixins/trades

div.row
  +trades
  
  +my-pending('!shops')
    section.col-sm-9
      article.lead.col-sm-6(ng-repeat='shop in shops | orderBy:"name"')
        div.panel.panel-primary
          - var _isEditing = 'isEditing(shop.id)'
          
          header.panel-heading
            span(ng-hide=_isEditing) {{shop.name}}
            +shop-name(_isEditing)

          div.panel-body.lead
            +shop-form(_isEditing)

            div(ng-hide=_isEditing)
              p الهاتف: {{shop.phone}}

              p التقييم: {{shop.rating}}

              p السعر الأدنى: {{shop.lower_price}}

              p السعر الأعلى: {{shop.higher_price}}

            p متوسط السعر: {{(shop.lower_price + shop.higher_price) / 2}}
            p عدد العمال: {{shop.workers_count}}
            p عدد المواد: {{shop.materials_count}}
          
          +panel-footer('shop')

+my-modal-form('إضافة محل', 'create(shop)')
  +shop-form(false)
    +shop-name(false)
